{% extends 'front_base.html.twig' %}

{% block title %}All Courses{% endblock %}

{% block stylesheets %}
<style>
/* Course Grid Styles */
.page-banner {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 4rem 0;
    color: white;
}

.page-title {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
}

.breadcrumb {
    background: transparent;
    padding: 0;
}

.breadcrumb-item {
    color: rgba(255, 255, 255, 0.8);
}

.breadcrumb-item.active {
    color: white;
}

.breadcrumb-item a {
    color: white;
    text-decoration: none;
}

.breadcrumb-item a:hover {
    text-decoration: underline;
}

.search-form {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.input-borderless {
    border: none !important;
}

.input-borderless input:focus {
    box-shadow: none !important;
}

.course-card {
    border: none;
    border-radius: 12px;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    height: 100%;
}

.course-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
}

.course-card .card-img-top {
    height: 200px;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.course-card:hover .card-img-top {
    transform: scale(1.05);
}

.course-badge {
    font-size: 0.75rem;
    padding: 0.25rem 0.75rem;
    border-radius: 15px;
    font-weight: 600;
}

.course-title {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
}

.course-title a {
    color: #2c3e50;
    text-decoration: none;
    transition: color 0.3s ease;
}

.course-title a:hover {
    color: #667eea;
}

.course-description {
    font-size: 0.9rem;
    color: #6c757d;
    margin-bottom: 1rem;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.rating-stars {
    color: #ffc107;
    font-size: 0.875rem;
}

.course-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.875rem;
    color: #6c757d;
}

.sidebar-card {
    border: none;
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    background: white;
}

.sidebar-title {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: #2c3e50;
}

.filter-section {
    margin-bottom: 1.5rem;
}

.filter-section h4 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: #2c3e50;
}

.filter-section h6 {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 0.75rem;
    color: #495057;
}

.filter-list {
    list-style: none;
    padding: 0;
}

.filter-list li {
    padding: 0.5rem 0;
    border-bottom: none;
}

.filter-list li:last-child {
    border-bottom: none;
}

.filter-list a {
    color: #6c757d;
    text-decoration: none;
    transition: color 0.3s ease;
}

.filter-list a:hover {
    color: #667eea;
}

.filter-list .active {
    color: #667eea;
    font-weight: 600;
}

/* Checkbox filter styles */
.d-flex justify-content-between align-items-center {
    padding: 0.25rem 0;
}

.form-check {
    margin-bottom: 0.5rem;
}

.form-check-input:checked {
    background-color: #667eea;
    border-color: #667eea;
}

.form-check-label {
    color: #495057;
    font-size: 0.9rem;
}

/* Button filter styles */
.btn-primary-soft-check {
    background: rgba(102, 126, 234, 0.1);
    border: 1px solid rgba(102, 126, 234, 0.2);
    color: #667eea;
    padding: 0.375rem 0.75rem;
    font-size: 0.875rem;
    border-radius: 0.375rem;
    transition: all 0.3s ease;
}

.btn-primary-soft-check:hover {
    background: rgba(102, 126, 234, 0.2);
    border-color: #667eea;
    color: #667eea;
}

.btn-check:checked + .btn-primary-soft-check {
    background: #667eea;
    border-color: #667eea;
    color: white;
}

/* Collapse styles */
.btn-more {
    color: #667eea;
    text-decoration: none;
    font-size: 0.875rem;
    cursor: pointer;
}

.btn-more:hover {
    color: #5a6fd8;
    text-decoration: underline;
}

.see-less {
    display: none;
}

[aria-expanded="true"] .see-more {
    display: none;
}

[aria-expanded="true"] .see-less {
    display: inline;
}

.price-range {
    display: flex;
    gap: 0.5rem;
    align-items: center;
}

.price-range input {
    width: 100%;
}

.results-count {
    font-size: 0.9rem;
    color: #6c757d;
}

@media (max-width: 768px) {
    .page-title {
        font-size: 2rem;
    }
    
    .course-card {
        margin-bottom: 1.5rem;
    }
}
</style>
{% endblock %}

{% block content %}
<!-- Page Banner -->
<section class="bg-blue align-items-center d-flex" style="background:url(assets/images/pattern/04.png) no-repeat center center; background-size:cover;">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center">
                <!-- Title -->
                <h1 class="text-white">All Courses</h1>
                <!-- Breadcrumb -->
                <div class="d-flex justify-content-center">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb breadcrumb-dark breadcrumb-dots mb-0">
                            <li class="breadcrumb-item"><a href="/" class="text-white">Home</a></li>
                            <li class="breadcrumb-item active text-white" aria-current="page">Courses</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Main Content -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <!-- Main Content -->
            <div class="col-lg-8 col-xl-9">
                <!-- Search and Filter Bar -->
                <form class="row mb-4 align-items-center" method="get" action="{{ path('app_course_grid') }}" id="main-search-form">
                    <!-- Search Bar -->
                    <div class="col-xl-6">
                        <div class="search-form p-2">
                            <div class="input-group input-borderless">
                                <input class="form-control me-1" type="search" name="search" placeholder="Find your course" value="{{ app.request.query.get('search') }}">
                                <button type="submit" class="btn btn-primary mb-0 rounded">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Sort Options -->
                    <div class="col-xl-3 mt-3 mt-xl-0">
                        <div class="search-form p-2">
                            <select class="form-select form-select-sm border-0" name="sort" onchange="this.form.submit()">
                                <option value="popular" {{ app.request.query.get('sort') == 'popular' ? 'selected' : '' }}>Most Popular</option>
                                <option value="newest" {{ app.request.query.get('sort') == 'newest' ? 'selected' : '' }}>Newest First</option>
                                <option value="rating" {{ app.request.query.get('sort') == 'rating' ? 'selected' : '' }}>Top Rated</option>
                                <option value="price_low" {{ app.request.query.get('sort') == 'price_low' ? 'selected' : '' }}>Price: Low to High</option>
                                <option value="price_high" {{ app.request.query.get('sort') == 'price_high' ? 'selected' : '' }}>Price: High to Low</option>
                            </select>
                        </div>
                    </div>

                    <!-- Results Count -->
                    <div class="col-12 col-xl-3 d-flex justify-content-between align-items-center mt-3 mt-xl-0">
                        <button class="btn btn-primary d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSidebar" aria-controls="offcanvasSidebar">
                            <i class="fas fa-sliders-h me-1"></i> Show filter
                        </button>
                        <span class="results-count">Showing {{ pagination|length }} of {{ pagination.getTotalItemCount }} courses</span>
                    </div>
                </form>

                <!-- Course Grid -->
                <div class="row g-4">
                    {% for course in pagination %}
                        <div class="col-sm-6 col-xl-4">
                            <div class="card course-card shadow h-100">
                                <!-- Course Image -->
                                {% if course.thumbnailUrl %}
                                    <img src="{{ asset(course.thumbnailUrl) }}" class="card-img-top" alt="{{ course.title }}">
                                {% else %}
                                    <img src="{{ asset('assets/images/avatar/01.jpg') }}" class="card-img-top" alt="{{ course.title }}">
                                {% endif %}
                                
                                <!-- Card Body -->
                                <div class="card-body pb-0">
                                    <!-- Badge and Favorite -->
                                    <div class="d-flex justify-content-between mb-2">
                                        {% if course.level %}
                                            <span class="badge course-badge bg-primary bg-opacity-10 text-primary">
                                                {{ course.level }}
                                            </span>
                                        {% else %}
                                            <span class="badge course-badge bg-secondary bg-opacity-10 text-secondary">
                                                All Levels
                                            </span>
                                        {% endif %}
                                        <a href="#" class="text-muted">
                                            <i class="far fa-heart"></i>
                                        </a>
                                    </div>
                                    
                                    <!-- Course Title -->
                                    <h5 class="course-title">
                                        <a href="{{ path('app_course_show', {'id': course.id}) }}">
                                            {{ course.title }}
                                        </a>
                                    </h5>
                                    
                                    <!-- Course Description -->
                                    <p class="course-description">
                                        {{ course.shortDescription|default('No description available') }}
                                    </p>
                                    
                                    <!-- Rating -->
                                    <div class="rating-stars mb-2">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star-half-alt"></i>
                                        <span class="ms-2">{{ random(4.0, 4.9) }}/5.0</span>
                                    </div>
                                </div>
                                
                                <!-- Card Footer -->
                                <div class="card-footer pt-0 pb-3">
                                    <hr>
                                    <div class="course-meta">
                                        <span>
                                            <i class="far fa-clock text-danger me-2"></i>
                                            {% if course.duration %}
                                                {{ course.duration }}h
                                            {% else %}
                                                Self-paced
                                            {% endif %}
                                        </span>
                                        <span>
                                            {% if course.chapters %}
                                                {{ course.chapters|length }} chapters
                                            {% else %}
                                                0 chapters
                                            {% endif %}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <div class="col-12">
                            <div class="text-center py-5">
                                <div class="mb-4">
                                    <i class="fas fa-search fa-4x text-muted mb-3"></i>
                                </div>
                                <h3 class="text-muted mb-3">No courses found</h3>
                                <p class="text-muted mb-4">We couldn't find any courses matching your search.</p>
                                
                                <div class="alert alert-info mx-auto" style="max-width: 500px;">
                                    <h5 class="alert-heading">
                                        <i class="fas fa-lightbulb me-2"></i>Suggestions:
                                    </h5>
                                    <ul class="text-start mb-0">
                                        <li>Check your spelling for typos</li>
                                        <li>Try more general keywords (e.g., "web" instead of "web development advanced")</li>
                                        <li>Use different search terms</li>
                                        <li>Browse our <a href="{{ path('app_course_categories') }}" class="alert-link">course categories</a></li>
                                    </ul>
                                </div>
                                
                                <div class="mt-4">
                                    <a href="{{ path('app_course_grid') }}" class="btn btn-primary">
                                        <i class="fas fa-times me-2"></i>Clear Search
                                    </a>
                                    <a href="{{ path('app_course_categories') }}" class="btn btn-outline-primary ms-2">
                                        <i class="fas fa-th me-2"></i>Browse All Courses
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>

                <!-- Pagination -->
                {% if pagination is defined and pagination.getTotalItemCount > 9 %}
                    <nav aria-label="Course pagination" class="mt-5">
                        <div class="d-flex justify-content-center">
                            {{ knp_pagination_render(pagination) }}
                        </div>
                    </nav>
                {% endif %}
            </div>

            <!-- Sidebar -->
            <div class="col-lg-4 col-xl-3">
                <!-- Responsive offcanvas body START -->
                <div class="offcanvas-lg offcanvas-end" tabindex="-1" id="offcanvasSidebar">
                    <div class="offcanvas-header bg-light">
                        <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Advance Filter</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#offcanvasSidebar" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body p-3 p-lg-0">
                        <form method="get" action="{{ path('app_course_grid') }}" id="filter-form">
                            <!-- Preserve current search and sort parameters -->
                            <input type="hidden" name="search" value="{{ app.request.query.get('search') }}">
                            <input type="hidden" name="sort" value="{{ app.request.query.get('sort') }}">
                            <!-- Category START -->
                            <div class="card card-body shadow p-4 mb-4">
                                <!-- Title -->
                                <h4 class="mb-3">Category</h4>
                                <!-- Category group -->
                                <div class="col-12">
                                    <!-- All Categories -->
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="" id="category-all" {{ currentFilters.categories is empty ? 'checked' : '' }}>
                                            <label class="form-check-label" for="category-all">All</label>
                                        </div>
                                        <span class="small">({{ pagination.getTotalItemCount() }})</span>
                                    </div>
                                    
                                    {% for category in categories %}
                                        <!-- Checkbox -->
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="form-check">
                                                <input class="form-check-input category-filter" type="checkbox" value="{{ category.id }}" id="category-{{ category.id }}" {{ category.id in currentFilters.categories ? 'checked' : '' }}>
                                                <label class="form-check-label" for="category-{{ category.id }}">{{ category.name }}</label>
                                            </div>
                                            <span class="small">({{ category.courseCount }})</span>
                                        </div>
                                    {% endfor %}
                                    
                                    {% if categories|length > 6 %}
                                        <!-- Collapse body for additional categories -->
                                        <div class="collapse multi-collapse" id="moreCategories">
                                            <div class="card card-body p-0">
                                                <!-- Additional categories would go here if needed -->
                                            </div>
                                        </div>
                                        <!-- Collapse button -->
                                        <a class="p-0 mb-0 mt-2 btn-more d-flex align-items-center" data-bs-toggle="collapse" href="#moreCategories" role="button" aria-expanded="false" aria-controls="moreCategories">
                                            See <span class="see-more ms-1">more</span><span class="see-less ms-1">less</span><i class="fas fa-angle-down ms-2"></i>
                                        </a>
                                    {% endif %}
                                </div>
                            </div>
                            <!-- Category END -->

                            <!-- Price START -->
                            <div class="card card-body shadow p-4 mb-4">
                                <!-- Title -->
                                <h4 class="mb-3">Price Level</h4>
                                <ul class="list-inline mb-0">
                                    <!-- All -->
                                    <li class="list-inline-item">
                                        <input type="radio" class="btn-check price-filter" name="price_type" id="price-option1" value="" {{ currentFilters.price_type is empty ? 'checked' : '' }}>
                                        <label class="btn btn-light btn-primary-soft-check" for="price-option1">All</label>
                                    </li>
                                    <!-- Free -->
                                    <li class="list-inline-item">
                                        <input type="radio" class="btn-check price-filter" name="price_type" id="price-option2" value="free" {{ currentFilters.price_type == 'free' ? 'checked' : '' }}>
                                        <label class="btn btn-light btn-primary-soft-check" for="price-option2">Free</label>
                                    </li>
                                    <!-- Paid -->
                                    <li class="list-inline-item">
                                        <input type="radio" class="btn-check price-filter" name="price_type" id="price-option3" value="paid" {{ currentFilters.price_type == 'paid' ? 'checked' : '' }}>
                                        <label class="btn btn-light btn-primary-soft-check" for="price-option3">Paid</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Price END -->

                            <!-- Skill level START -->
                            <div class="card card-body shadow p-4 mb-4">
                                <!-- Title -->
                                <h4 class="mb-3">Skill level</h4>
                                <ul class="list-inline mb-0">
                                    <!-- All levels -->
                                    <li class="list-inline-item mb-2">
                                        <input type="checkbox" class="btn-check level-filter" id="btn-check-all" value="" {{ currentFilters.levels is empty or (currentFilters.levels|length == 1 and currentFilters.levels[0] == '') ? 'checked' : '' }}>
                                        <label class="btn btn-light btn-primary-soft-check" for="btn-check-all">All levels</label>
                                    </li>
                                    <!-- Beginner -->
                                    <li class="list-inline-item mb-2">
                                        <input type="checkbox" class="btn-check level-filter" id="btn-check-beginner" value="Beginner" {{ 'Beginner' in currentFilters.levels ? 'checked' : '' }}>
                                        <label class="btn btn-light btn-primary-soft-check" for="btn-check-beginner">Beginner</label>
                                    </li>
                                    <!-- Intermediate -->
                                    <li class="list-inline-item mb-2">
                                        <input type="checkbox" class="btn-check level-filter" id="btn-check-intermediate" value="Intermediate" {{ 'Intermediate' in currentFilters.levels ? 'checked' : '' }}>
                                        <label class="btn btn-light btn-primary-soft-check" for="btn-check-intermediate">Intermediate</label>
                                    </li>
                                    <!-- Advanced -->
                                    <li class="list-inline-item mb-2">
                                        <input type="checkbox" class="btn-check level-filter" id="btn-check-advanced" value="Advanced" {{ 'Advanced' in currentFilters.levels ? 'checked' : '' }}>
                                        <label class="btn btn-light btn-primary-soft-check" for="btn-check-advanced">Advanced</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Skill level END -->

                            <!-- Language START -->
                            <div class="card card-body shadow p-4 mb-4">
                                <!-- Title -->
                                <h4 class="mb-3">Language</h4>
                                <ul class="list-inline mb-0 g-3">
                                    {% for language in languages %}
                                        <!-- Item -->
                                        <li class="list-inline-item mb-2">
                                            <input type="checkbox" class="btn-check language-filter" id="btn-check-lang-{{ loop.index }}" value="{{ language.name }}" {{ language.name in currentFilters.languages ? 'checked' : '' }}>
                                            <label class="btn btn-light btn-primary-soft-check" for="btn-check-lang-{{ loop.index }}">{{ language.name }}</label>
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                            <!-- Language END -->
                            
                            <!-- Button -->
                            <div class="d-grid p-2 p-lg-0 text-center">
                                <button type="submit" class="btn btn-primary mb-0">Filter Results</button>
                            </div>
                        </form><!-- Form End -->
                <!-- Responsive offcanvas body END -->
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block javascripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // AJAX filtering without page refresh
    const levelFilters = document.querySelectorAll('.level-filter');
    const levelAll = document.getElementById('btn-check-all');
    const categoryFilters = document.querySelectorAll('.category-filter');
    const categoryAll = document.getElementById('category-all');
    
    function updateFilters() {
        // Get all form data
        const formData = new FormData(document.getElementById('filter-form'));
        const params = new URLSearchParams();
        
        // Add all form parameters
        for (let [key, value] of formData.entries()) {
            if (value !== '') {
                params.append(key, value);
            }
        }
        
        // Handle level filters separately to ensure proper array format
        const selectedLevels = [];
        levelFilters.forEach(filter => {
            if (filter.checked && filter.value) {
                selectedLevels.push(filter.value);
            }
        });
        
        // Remove existing levels and add as array
        params.delete('levels');
        params.delete('levels[]');
        selectedLevels.forEach(level => {
            params.append('levels[]', level);
        });
        
        // Handle category filters separately to ensure proper array format
        const selectedCategories = [];
        categoryFilters.forEach(filter => {
            if (filter.checked && filter.value) {
                selectedCategories.push(filter.value);
            }
        });
        
        // Remove existing categories and add as array
        params.delete('categories');
        params.delete('categories[]');
        selectedCategories.forEach(category => {
            params.append('categories[]', category);
        });
        
        // Handle language filters separately to ensure proper array format
        const languageFilters = document.querySelectorAll('.language-filter');
        const selectedLanguages = [];
        languageFilters.forEach(filter => {
            if (filter.checked && filter.value) {
                selectedLanguages.push(filter.value);
            }
        });
        
        // Remove existing languages and add as array
        params.delete('languages');
        params.delete('languages[]');
        selectedLanguages.forEach(language => {
            params.append('languages[]', language);
        });
        
        console.log('Filter params:', params.toString());
        
        // Update URL without page refresh
        const newUrl = window.location.pathname + '?' + params.toString();
        window.history.pushState({}, '', newUrl);
        
        // Fetch filtered results via AJAX
        fetchFilteredResults(params.toString());
    }
    
    levelFilters.forEach(filter => {
        filter.addEventListener('change', function() {
            // Handle "All levels" logic
            if (this.id !== 'btn-check-all' && this.checked && levelAll) {
                levelAll.checked = false;
            }
            if (this.id === 'btn-check-all' && this.checked) {
                levelFilters.forEach(f => {
                    if (f.id !== 'btn-check-all') {
                        f.checked = false;
                    }
                });
            }
            
            updateFilters();
        });
    });
    
    // Handle category filters
    categoryFilters.forEach(filter => {
        filter.addEventListener('change', function() {
            if (this.checked && categoryAll) {
                categoryAll.checked = false;
            }
            if (this.id === 'category-all' && this.checked) {
                categoryFilters.forEach(f => {
                    if (f.id !== 'category-all') {
                        f.checked = false;
                    }
                });
            }
            updateFilters();
        });
    });
    
    const priceFilters = document.querySelectorAll('.price-filter');
    priceFilters.forEach(filter => {
        filter.addEventListener('change', updateFilters);
    });
    
    const languageFilters = document.querySelectorAll('.language-filter');
    languageFilters.forEach(filter => {
        filter.addEventListener('change', updateFilters);
    });
    
    // Function to fetch filtered results via AJAX
    function fetchFilteredResults(queryString) {
        console.log('Fetching results with:', queryString);
        
        // Show loading state
        const courseGrid = document.querySelector('.row.g-4');
        if (courseGrid) {
            courseGrid.style.opacity = '0.5';
            courseGrid.innerHTML = '<div class="col-12 text-center py-5"><i class="fas fa-spinner fa-spin me-2"></i>Loading...</div>';
        }
        
        // Fetch filtered courses
        fetch(`/courses/filter${queryString ? '?' + queryString : ''}`, {
            headers: {
                'X-Requested-With': 'XMLHttpRequest',
                'Accept': 'application/json'
            }
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            console.log('Received data:', data);
            
            if (data.success) {
                // Update the course grid with new results
                if (courseGrid) {
                    courseGrid.innerHTML = data.html;
                    courseGrid.style.opacity = '1';
                }
                
                // Update results count
                const resultsCount = document.querySelector('.results-count');
                if (resultsCount) {
                    resultsCount.textContent = `Showing ${data.count} courses`;
                }
            } else {
                throw new Error('Filter request failed');
            }
        })
        .catch(error => {
            console.error('Error fetching filtered results:', error);
            if (courseGrid) {
                courseGrid.style.opacity = '1';
                courseGrid.innerHTML = '<div class="col-12 text-center py-5"><i class="fas fa-exclamation-triangle me-2"></i>Error loading results. Please try again.</div>';
            }
        });
    });
</script>

<style>
    /* Custom Pagination Styles for Basic HTML Structure */
    .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 0.5rem;
        margin: 2rem 0;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        padding: 1.5rem;
        border-radius: 1rem;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        border: 1px solid #dee2e6;
    }
    
    .pagination span {
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }
    
    .pagination .first a,
    .pagination .previous a,
    .pagination .next a,
    .pagination .last a,
    .pagination .page a,
    .pagination .current {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        text-decoration: none;
        font-weight: 600;
        font-size: 0.875rem;
        transition: all 0.3s ease;
        color: #495057;
        background: white;
        border: 2px solid #dee2e6;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .pagination .first a:hover,
    .pagination .previous a:hover,
    .pagination .next a:hover,
    .pagination .last a:hover,
    .pagination .page a:hover {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-color: #667eea;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
    }
    
    .pagination .first a:active,
    .pagination .previous a:active,
    .pagination .next a:active,
    .pagination .last a:active,
    .pagination .page a:active {
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        transition: all 0.1s ease;
    }
    
    .pagination .current {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-color: #667eea;
        box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        transform: scale(1.1);
        font-weight: 700;
    }
    
    .pagination .first a,
    .pagination .previous a {
        background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
        color: white;
        border-color: #6c757d;
    }
    
    .pagination .next a,
    .pagination .last a {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        color: white;
        border-color: #28a745;
    }
    
    .pagination .first a:hover,
    .pagination .previous a:hover {
        background: linear-gradient(135deg, #5a6268 0%, #495057 100%);
        border-color: #5a6268;
    }
    
    .pagination .next a:hover,
    .pagination .last a:hover {
        background: linear-gradient(135deg, #218838 0%, #1ea085 100%);
        border-color: #218838;
    }
    
    .pagination .page a {
        background: white;
        border-color: #dee2e6;
    }
    
    /* Special styling for current page indicator */
    .pagination .current {
        position: relative;
        overflow: hidden;
    }
    
    .pagination .current::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 100%);
        border-radius: 50%;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
        .pagination {
            flex-wrap: wrap;
            gap: 0.25rem;
            padding: 1rem;
        }
        
        .pagination span {
            width: 35px;
            height: 35px;
            font-size: 0.75rem;
        }
    }
    
    /* Add some animation */
    @keyframes pulse {
        0% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.05);
        }
        100% {
            transform: scale(1);
        }
    }
    
    .pagination .current {
        animation: pulse 2s infinite;
    }
</style>
{% endblock %}
